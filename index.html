<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>å‚»æ¯”åé€£æŠ½å¡æ± </title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React 18 UMD -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <!-- framer-motion UMD -->
  <script src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>
  <style>html,body,#root{height:100%;margin:0;padding:0}</style>
</head>
<body class="bg-slate-100">
  <div id="root"></div>

  <!-- ä¸€å®šè¦åŠ  data-presets="react" æ‰èƒ½è½‰ JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel" data-presets="react">
    const { useMemo, useState } = React;
    // ç¢ºä¿ framer-motion æœ‰è¼‰åˆ°ï¼ˆå¦å‰‡çµ¦å€‹ fallbackï¼‰
    const fm = window.framerMotion;
    if(!fm) console.warn("framer-motion æœªè¼‰åˆ°ï¼Œå‹•ç•«å°‡ç„¡æ³•ä½¿ç”¨ã€‚");
    const { motion = { div: (p)=>React.createElement('div', p) } } = fm || {};

    const CARD_POOL = {
      "å¯æ„›å¡ ğŸ¾": [
        "å–µï½å¿«æŠ±æˆ‘ï¼Œä¸ç„¶æˆ‘è¦æ»¾åœ°æ¿äº†ï¼",
        "è‚‰çƒåªçµ¦ä½ æ‘¸å–µï¼",
        "ä»Šå¤©çš„å¯æ„›é…é¡åªçµ¦ä½ ï¼",
        "é éä¾†ï¼Œè®“æˆ‘ç”¨å°è…¦è¢‹æ‹±ä½ ä¸€ä¸‹ï½",
        "æœ¬å–µä»Šå¤©ä¹Ÿè¦æŠŠä½ å ç‚ºå·±æœ‰ âœ§"
      ],
      "æ²™é›•å¡ ğŸ¤£": [
        "æˆ‘ä¸æ˜¯å‚»ï¼Œæˆ‘åªæ˜¯å¿«æ¨‚éé‡ã€‚",
        "äººå®¶åªæ˜¯è‚šå­åœ¨ä¿®ç…‰ï¼Œä¸æ˜¯èƒ–ï¼",
        "ä½ è¦æ˜¯ä¸ç¬‘ï¼Œæˆ‘å°±è£æ­»çµ¦ä½ çœ‹ (x_x)",
        "ä»Šå¤©ä¸æç¬‘èº«é«”æœƒç¼ºéˆ£ï¼",
        "æˆ‘åœ¨ç¯€é£Ÿâ€”â€”ç¯€çš„æ˜¯ç†æ™ºé£Ÿã€‚"
      ],
      "ä¸­äºŒå¡ âš¡": [
        "é»‘æš—åœ¨å‘¼å–šï¼Œè€Œæˆ‘å›æ‡‰äº†å®ƒã€‚",
        "æ˜Ÿè¾°çš†å¢œè½ï¼Œå”¯æˆ‘ä»ç‹‚èˆï¼",
        "ä¸–ç•Œçš„ç›¡é ­ï¼Œåˆ»è‘—å‚»æ¯”çš„åå­—ã€‚",
        "é¢¨æš´å› æˆ‘è€Œç”Ÿï¼Œå¯‚éœç‚ºæˆ‘è®“é“ã€‚",
        "å…‰èˆ‡å½±çš„ç•Œç·šï¼Œå³æ˜¯æˆ‘çš„ç–†åŸŸã€‚"
      ],
      "é©šå–œå¡ ğŸŒˆ": [
        "ä»Šå¤©æœƒæœ‰å¥½é‹é™è‡¨ï¼Œå› ç‚ºä½ æŠ½åˆ°æˆ‘å•¦ï½",
        "ç§˜å¯†å¡ï¼šå¿«å»å–æ°´ï¼",
        "éš±è—Bosså¡ï¼šå‚»æ¯”è¶…é€²åŒ–ï¼",
        "åŠ åˆ†å¡ï¼šç¾åœ¨å»å‚³è¨Šæ¯çµ¦ä¸€å€‹æœ‹å‹ï½",
        "ä¼‘æ¯å¡ï¼šä¼¸å€‹æ‡¶è…°å†æŠ½ä¸€æ¬¡ï¼"
      ]
    };
    const CATEGORIES = Object.keys(CARD_POOL);
    const randomPick = (arr) => arr[Math.floor(Math.random() * arr.length)];
    const cryptoId = () => Math.random().toString(36).slice(2)+Date.now().toString(36);

    function drawTen() {
      const results = [];
      ["å¯æ„›å¡ ğŸ¾","æ²™é›•å¡ ğŸ¤£","ä¸­äºŒå¡ âš¡"].forEach((key)=>{
        results.push({ category:key, text:randomPick(CARD_POOL[key]), id:cryptoId() });
      });
      while(results.length<10){
        const cat = randomPick(CATEGORIES);
        results.push({ category:cat, text:randomPick(CARD_POOL[cat]), id:cryptoId() });
      }
      return results;
    }

    function CardFace({ category, text }) {
      const badge =
        category.includes("å¯æ„›") ? "bg-pink-100 text-pink-700" :
        category.includes("æ²™é›•") ? "bg-yellow-100 text-yellow-700" :
        category.includes("ä¸­äºŒ") ? "bg-purple-100 text-purple-700" :
        "bg-emerald-100 text-emerald-700";
      return (
        <div className="flex flex-col h-full">
          <div className={`px-2 py-1 rounded-xl text-xs font-semibold w-max ${badge}`}>{category}</div>
          <div className="mt-2 text-base leading-relaxed flex-1">{text}</div>
          <div className="mt-3 text-xs text-slate-400">#å‚»æ¯”å¡æ± </div>
        </div>
      );
    }

    function CardFlip({ children, index, revealed }) {
      return (
        <motion.div
          className="aspect-[3/4] bg-white rounded-2xl shadow relative overflow-hidden"
          initial={{ rotateY: 0 }}
          animate={{ rotateY: revealed ? 180 : 0 }}
          transition={{ duration: 0.6, delay: index * 0.05 }}
          style={{ transformStyle: "preserve-3d" }}
        >
          {/* èƒŒé¢ */}
          <div className="absolute inset-0 grid place-items-center bg-gradient-to-br from-slate-800 to-slate-900 text-white"
               style={{ backfaceVisibility: "hidden" }}>
            <motion.div
              animate={{ scale: revealed ? 0.9 : [1,1.05,1] }}
              transition={{ duration: 1.2, repeat: revealed ? 0 : Infinity, repeatType: "reverse" }}
              className="text-2xl font-black tracking-widest"
            >
              S A B I I
            </motion.div>
          </div>
          {/* æ­£é¢ */}
          <div className="absolute inset-0 p-3 flex flex-col"
               style={{ backfaceVisibility: "hidden", transform: "rotateY(180deg)" }}>
            {children}
          </div>
        </motion.div>
      );
    }

    function App(){
      const [results,setResults] = useState(null);
      const [rolling,setRolling] = useState(false);
      const [revealed,setRevealed] = useState(false);

      const counts = useMemo(()=>{
        const m={}; CATEGORIES.forEach(c=>m[c]=0);
        results?.forEach(r=>m[r.category]++); return m;
      },[results]);

      const handleRoll = async ()=>{
        setRolling(true); setRevealed(false); setResults(drawTen());
        await new Promise(r=>setTimeout(r,1200));
        setRevealed(true); setRolling(false);
      };

      const handleCopy = async ()=>{
        if(!results) return;
        const lines = results.map((r,i)=>`${i+1}. ${r.category}ï¼š${r.text}`).join("\n");
        try{
          await navigator.clipboard.writeText(`ğŸ° å‚»æ¯”åé€£æŠ½çµæœ\n${lines}`);
          alert("å·²è¤‡è£½çµæœåˆ°å‰ªè²¼ç°¿ï¼");
        }catch{ alert("è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•é¸å–ã€‚"); }
      };

      return (
        <div className="min-h-full bg-gradient-to-b from-slate-50 to-slate-100 text-slate-900 p-6">
          <div className="max-w-3xl mx-auto">
            <header className="text-center mb-6">
              <h1 className="text-3xl md:text-4xl font-extrabold tracking-tight">ğŸ° å‚»æ¯”åé€£æŠ½å¡æ± </h1>
              <p className="text-slate-600 mt-2">ä¸€æ¬¡åæŠ½ï¼Œä¿åº•å¯æ„›ï¼‹æ²™é›•ï¼‹ä¸­äºŒå„ä¸€å¼µï¼</p>
            </header>

            <div className="flex flex-col sm:flex-row gap-3 justify-center mb-6">
              <button onClick={handleRoll} disabled={rolling}
                className="px-5 py-3 rounded-2xl shadow bg-black text-white disabled:opacity-60">
                {rolling ? "æŠ½å¡ä¸­â€¦" : results ? "å†æŠ½åé€£" : "é–‹å§‹åé€£æŠ½"}
              </button>
              <button onClick={handleCopy}
                className="px-5 py-3 rounded-2xl shadow border border-slate-300 bg-white">
                è¤‡è£½çµæœ
              </button>
            </div>

            <div className="grid grid-cols-2 md:grid-cols-5 gap-3">
              {results ? results.map((card, idx)=>(
                <CardFlip key={card.id} index={idx} revealed={revealed}>
                  <CardFace category={card.category} text={card.text} />
                </CardFlip>
              )) : (
                <div className="col-span-full text-center text-slate-500">
                  æŒ‰ä¸‹ã€Œé–‹å§‹åé€£æŠ½ã€ï¼Œè®“å‘½é‹ç¿»ç‰Œ âœ¨
                </div>
              )}
            </div>

            {results && (
              <motion.div initial={{opacity:0,y:10}} animate={{opacity:1,y:0}}
                          className="mt-8 bg-white rounded-2xl shadow p-4">
                <h2 className="font-bold text-lg mb-2">çµæœçµ±è¨ˆ</h2>
                <ul className="grid grid-cols-2 md:grid-cols-4 gap-2 text-sm">
                  {CATEGORIES.map((c)=>(
                    <li key={c} className="flex items-center justify-between border rounded-xl px-3 py-2">
                      <span>{c}</span>
                      <span className="font-mono">{(results||[]).filter(r=>r.category===c).length}</span>
                    </li>
                  ))}
                </ul>
              </motion.div>
            )}

            <footer className="text-center text-xs text-slate-500 mt-8">
              Made for å‚»æ¯” Â· é€™æ˜¯ä½ çš„å°ˆå±¬å¡æ±  âœ¨
            </footer>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
  </script>
</body>
</html>
