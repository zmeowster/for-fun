<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>傻比十連抽卡池（超穩定版）</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card { transform-style: preserve-3d; transition: transform .6s; }
    .card.revealed { transform: rotateY(180deg); }
    .face { backface-visibility: hidden; }
    .back { transform: rotateY(0); }
    .front { transform: rotateY(180deg); }
    .pulse { animation: pulse 1.2s infinite alternate; }
    @keyframes pulse { from { transform: scale(1); } to { transform: scale(1.05); } }
  </style>
</head>
<body class="bg-slate-100 min-h-screen">
  <div class="max-w-3xl mx-auto p-6 text-slate-900">
    <header class="text-center mb-6">
      <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">🎰 傻比十連抽卡池</h1>
      <p class="text-slate-600 mt-2">一次十抽，保底可愛＋沙雕＋中二各一張！</p>
    </header>

    <div class="flex flex-col sm:flex-row gap-3 justify-center mb-6">
      <button id="rollBtn" class="px-5 py-3 rounded-2xl shadow bg-black text-white disabled:opacity-60">開始十連抽</button>
      <button id="copyBtn" class="px-5 py-3 rounded-2xl shadow border border-slate-300 bg-white">複製結果</button>
    </div>

    <div id="grid" class="grid grid-cols-2 md:grid-cols-5 gap-3"></div>

    <div id="stats" class="mt-8 bg-white rounded-2xl shadow p-4 hidden">
      <h2 class="font-bold text-lg mb-2">結果統計</h2>
      <ul class="grid grid-cols-2 md:grid-cols-4 gap-2 text-sm" id="statList"></ul>
    </div>

    <footer class="text-center text-xs text-slate-500 mt-8">
      Made for 傻比 · 這是你的專屬卡池 ✨
    </footer>
  </div>

  <script>
    const CARD_POOL = {
      "可愛卡 🐾": [
        "喵～快抱我，不然我要滾地板了！",
        "肉球只給你摸喵！",
        "今天的可愛配額只給你！",
        "靠過來，讓我用小腦袋拱你一下～",
        "本喵今天也要把你占為己有 ✧"
      ],
      "沙雕卡 🤣": [
        "我不是傻，我只是快樂過量。",
        "人家只是肚子在修煉，不是胖！",
        "你要是不笑，我就裝死給你看 (x_x)",
        "今天不搞笑身體會缺鈣！",
        "我在節食——節的是理智食。"
      ],
      "中二卡 ⚡": [
        "黑暗在呼喚，而我回應了它。",
        "星辰皆墜落，唯我仍狂舞！",
        "世界的盡頭，刻著傻比的名字。",
        "風暴因我而生，寂靜為我讓道。",
        "光與影的界線，即是我的疆域。"
      ],
      "驚喜卡 🌈": [
        "今天會有好運降臨，因為你抽到我啦～",
        "秘密卡：快去喝水！",
        "隱藏Boss卡：傻比超進化！",
        "加分卡：現在去傳訊息給一個朋友～",
        "休息卡：伸個懶腰再抽一次！"
      ]
    };
    const CATEGORIES = Object.keys(CARD_POOL);
    const grid = document.getElementById("grid");
    const stats = document.getElementById("stats");
    const statList = document.getElementById("statList");
    const rollBtn = document.getElementById("rollBtn");
    const copyBtn = document.getElementById("copyBtn");

    function pick(arr){ return arr[Math.floor(Math.random()*arr.length)] }
    function drawTen(){
      const res = [];
      ["可愛卡 🐾","沙雕卡 🤣","中二卡 ⚡"].forEach(k=>{
        res.push({category:k, text:pick(CARD_POOL[k])});
      });
      while(res.length<10){
        const cat = pick(CATEGORIES);
        res.push({category:cat, text:pick(CARD_POOL[cat])});
      }
      return res;
    }

    function badgeClass(cat){
      if(cat.includes("可愛")) return "bg-pink-100 text-pink-700";
      if(cat.includes("沙雕")) return "bg-yellow-100 text-yellow-700";
      if(cat.includes("中二")) return "bg-purple-100 text-purple-700";
      return "bg-emerald-100 text-emerald-700";
    }

    function renderCards(results){
      grid.innerHTML = "";
      results.forEach((card, i)=>{
        const wrapper = document.createElement("div");
        wrapper.className = "aspect-[3/4] bg-white rounded-2xl shadow relative overflow-hidden card";
        wrapper.style.transitionDelay = `${i*50}ms`;
        wrapper.innerHTML = `
          <div class="absolute inset-0 grid place-items-center bg-gradient-to-br from-slate-800 to-slate-900 text-white face back">
            <div class="text-2xl font-black tracking-widest pulse">S A B I I</div>
          </div>
          <div class="absolute inset-0 p-3 flex flex-col face front">
            <div class="px-2 py-1 rounded-xl text-xs font-semibold w-max ${badgeClass(card.category)}">${card.category}</div>
            <div class="mt-2 text-base leading-relaxed flex-1">${card.text}</div>
            <div class="mt-3 text-xs text-slate-400">#傻比卡池</div>
          </div>
        `;
        grid.appendChild(wrapper);
        setTimeout(()=> wrapper.classList.add("revealed"), 1000 + i*50);
      });
    }

    function renderStats(results){
      const count = Object.fromEntries(CATEGORIES.map(c=>[c,0]));
      results.forEach(r=>count[r.category]++);
      statList.innerHTML = CATEGORIES.map(c=>`
        <li class="flex items-center justify-between border rounded-xl px-3 py-2">
          <span>${c}</span>
          <span class="font-mono">${count[c]}</span>
        </li>
      `).join("");
      stats.classList.remove("hidden");
    }

    let lastResults = null;
    rollBtn.addEventListener("click", ()=>{
      rollBtn.disabled = true;
      rollBtn.textContent = lastResults ? "再抽十連" : "抽卡中…";
      const results = drawTen();
      lastResults = results;
      renderCards(results);
      renderStats(results);
      setTimeout(()=>{ rollBtn.disabled = false; rollBtn.textContent = "再抽十連"; }, 1300);
    });

    copyBtn.addEventListener("click", async ()=>{
      if(!lastResults) return;
      const lines = lastResults.map((r,i)=>`${i+1}. ${r.category}：${r.text}`).join("\n");
      try{
        await navigator.clipboard.writeText(`🎰 傻比十連抽結果\n${lines}`);
        alert("已複製結果到剪貼簿！");
      }catch{ alert("複製失敗，請手動選取。"); }
    });

    // 初始提示
    grid.innerHTML = '<div class="col-span-full text-center text-slate-500">按下「開始十連抽」，讓命運翻牌 ✨</div>';
  </script>
</body>
</html>
